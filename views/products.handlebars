<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
</head>
<body>
<h1>{{title}}</h1>

<form action="/api/carts/current" method="POST">
    <input type="hidden" name="productId" value="{{product._id}}">
    <input type="number" name="quantity" value="1" min="1">
    <button type="submit">Agregar al Carrito</button>
</form>

{{#if products.length}}
    <ul>
        {{#each products}}
            <li>
                <h2>{{this.title}}</h2>
                <p>Price: ${{this.price}}</p>
                <a href="/products/{{this._id}}">View Details</a>
                <form action="/api/carts/current" method="POST">
                    <input type="hidden" name="productId" value="{{this._id}}">
                    <input type="number" name="quantity" value="1" min="1">
                    <button type="submit">Add to Cart</button>
                </form>
            </li>
        {{/each}}
    </ul>

    <div>
        {{#if pagination.prevPage}}
            <a href="{{pagination.prevPage}}">Previous</a>
        {{/if}}
        {{#if pagination.nextPage}}
            <a href="{{pagination.nextPage}}">Next</a>
        {{/if}}
    </div>
{{else}}
    <p>No products found.</p>
{{/if}}

</body>
</html>
